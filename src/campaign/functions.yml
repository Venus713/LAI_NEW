create_campain:
  handler: src/campaign/handler.create_campain
  events:
    - http:
        path: campaings/
        method: post
        cors:
          origin: '*'

campain_list:
  handler: src/campaign/handler.campaign_list
  events:
    - http:
        path: campaings/
        method: get
        cors:
          origin: '*'

retrieve_campaign:
  handler: src/campaign/handler.retrieve_campaign
  events:
    - http:
        path: campaigns/{id}
        method: get
        cors:
          origin: '*'

search_campaign:
  handler: src/campaign/handler.search_campaign
  events:
    - http:
        path: campaigns/search/{key}
        method: get
        cors:
          origin: '*'

update_campaign:
  handler: src/campaign/handler.update_campaign
  events:
    - http:
        path: campaigns/{id}
        method: put
        cors:
          origin: '*'

delete_campaign:
  handler: src/campaign/handler.delete_campaign
  events:
    - http:
        path: campaigns/{id}
        method: delete
        cors:
          origin: '*'

# campaign_from_facebook:
#   handler: campaign/handler.campaign_from_facebook
#   events:
#     - http:
#         path: campaigns/fb
#         method: get
#         cors:
#           origin: '*'

# campaign_performance:
#   handler: campaign/handler.campaign_performance
#   events:
#     - http:
#         path: campaigns/graph
#         method: get
#         cors:
#           origin: '*'

get_selectable_events:
  handler: src/campaign/handler.get_selectable_events_handler
  events:
    - http:
        path: campaings/get_selectable_events/
        method: get
        cors:
          origin: '*'

account_pixels:
  handler: src/campaign/handler.account_pixels_handler
  events:
    - http:
        path: campaings/account_pixels/
        method: get
        cors:
          origin: '*'

get_page_list:
  handler: src/campaign/handler.get_page_list_handler
  events:
    - http:
        path: campaings/get_page_list/
        method: get
        cors:
          origin: '*'

account_mobile_apps:
  handler: src/campaign/handler.account_mobile_apps_handler
  events:
    - http:
        path: campaings/account_mobile_apps/
        method: get
        cors:
          origin: '*'

active_audiences:
  handler: src/campaign/handler.active_audiences_handler
  events:
    - http:
        path: campaings/active_audiences/
        method: get
        cors:
          origin: '*'

fb_make_lookalikes:
  handler: src/campaign/handler.fb_make_lookalikes_handler
  events:
    - http:
        path: campaings/fb_make_lookalikes/
        method: get
        cors:
          origin: '*'

create_fb_targeting_simple:
  handler: src/campaign/handler.create_fb_targeting_simple_handler
  events:
    - http:
        path: campaings/create_fb_targeting_simple/
        method: post
        cors:
          origin: '*'

import_campaign:
  handler: src/campaign/handler.import_campaign_handler
  events:
    - http:
        path: campaings/import_campaign/
        method: post
        cors:
          origin: '*'

edit_fields:
  handler: src/campaign/handler.edit_fields_handler
  events:
    - http:
        path: campaings/edit_fields/
        method: post
        cors:
          origin: '*'
  environment:
      SQS_URL:
        Ref: SQSQueue

execute_async_task:
    handler: src.handler.execute_async_task
    events:
      - sqs:
          arn:
            Fn::GetAtt: [ SQSQueue, Arn ]